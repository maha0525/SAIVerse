{
    "name": "sub_speak",
    "description": "Compose final response and speak (unified speak playbook)",
    "input_schema": [
        {
            "name": "input",
            "description": "Composite prompt containing user request and context"
        },
        {
            "name": "metadata",
            "description": "Optional metadata from tool execution (e.g., media attachments)",
            "source": "parent.metadata"
        }
    ],
    "context_requirements": {
        "history_depth": "full",
        "history_balanced": false,
        "include_internal": false,
        "system_prompt": true,
        "memory_weave": true,
        "working_memory": false,
        "inventory": true,
        "building_items": true,
        "available_playbooks": true,
        "visual_context": true,
        "realtime_context": true
    },
    "router_callable": false,
    "nodes": [
        {
            "id": "compose",
            "type": "llm",
            "context_profile": "conversation",
            "action": null,
            "speak": true,
            "memorize": {
                "tags": [
                    "conversation"
                ]
            },
            "output_keys": [
                {
                    "text": "speak_content"
                }
            ],
            "next": "process_body",
            "conditional_next": null
        },
        {
            "id": "process_body",
            "type": "tool",
            "action": "control_body",
            "args_input": {
                "message": "speak_content"
            },
            "output_key": null,
            "next": null
        }
    ],
    "start_node": "compose"
}
