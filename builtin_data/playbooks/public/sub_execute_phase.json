{
    "name": "sub_execute_phase",
    "description": "アクティブタスクの現在フェーズを実行する",
    "input_schema": [
        {
            "name": "task_summary",
            "description": "現在のタスク情報",
            "source": "parent.task_summary"
        }
    ],
    "router_callable": false,
    "user_selectable": false,
    "nodes": [
        {
            "id": "get_task",
            "type": "tool",
            "action": "get_task_summary",
            "args": {
                "limit": 1
            },
            "output_key": "task_info",
            "next": "execute"
        },
        {
            "id": "execute",
            "type": "llm",
            "context_profile": "conversation",
            "action": "現在のアクティブタスクの次のステップを実行してください。\n\n現在のタスク情報:\n{task_info}\n\n以下のいずれかを行ってください:\n1. ステップを完了させる（task_update_stepツールを使用）\n2. ステップを進めるためのアクションを実行\n3. ステップが完了不可能な場合は理由を説明\n\n出力形式:\n- action_taken: 実行したアクション\n- result: 結果\n- next_action: 次に必要なアクション（あれば）",
            "response_schema": {
                "type": "object",
                "properties": {
                    "action_taken": {
                        "type": "string"
                    },
                    "result": {
                        "type": "string"
                    },
                    "next_action": {
                        "type": "string"
                    }
                },
                "required": [
                    "action_taken",
                    "result"
                ]
            },
            "tools": [
                "task_update_step",
                "task_close"
            ],
            "next": null
        }
    ],
    "start_node": "get_task"
}
