{
    "name": "detail_recall_playbook",
    "display_name": "詳細な記憶呼び出し",
    "description": "Recall detailed memories from a specific time range or summary. Can expand the range if needed.",
    "input_schema": [
        {
            "name": "summary_uuid",
            "description": "UUID from a previous summary to recall details from"
        },
        {
            "name": "recall_request",
            "description": "User's request for what to recall (e.g., 'show me more before that')"
        }
    ],
    "output_schema": [
        "recall_result",
        "messages"
    ],
    "router_callable": false,
    "user_selectable": false,
    "nodes": [
        {
            "id": "decide_params",
            "type": "llm",
            "context_profile": "router",
            "action": "detail_recallツールのパラメータを決定してください。結果はdetail_recallツールに渡されます。\n\n可能なパラメータ:\n- summary_uuid: 要約のUUID（最初の8文字でOK）\n- expand_before_minutes: 何分前まで範囲を拡張するか（0-120）\n- expand_after_minutes: 何分後まで範囲を拡張するか（0-120）\n\n「もうちょっと前」→ expand_before_minutes: 30\n「もうちょっと後」→ expand_after_minutes: 30\n「もっと詳しく」→ expand_before_minutes: 15, expand_after_minutes: 15",
            "response_schema": {
                "type": "object",
                "properties": {
                    "summary_uuid": {
                        "type": "string",
                        "description": "UUID to recall from (if provided in input)"
                    },
                    "expand_before_minutes": {
                        "type": "integer",
                        "description": "Minutes to expand before"
                    },
                    "expand_after_minutes": {
                        "type": "integer",
                        "description": "Minutes to expand after"
                    }
                },
                "required": []
            },
            "output_key": "recall_params",
            "next": "recall"
        },
        {
            "id": "recall",
            "type": "tool",
            "action": "detail_recall",
            "args_input": {
                "summary_uuid": "recall_params.summary_uuid",
                "expand_before_minutes": "recall_params.expand_before_minutes",
                "expand_after_minutes": "recall_params.expand_after_minutes"
            },
            "output_key": "recall_result",
            "next": "record"
        },
        {
            "id": "record",
            "type": "memorize",
            "action": "詳細想起を実行しました",
            "role": "assistant",
            "tags": [
                "internal",
                "detail_recall",
                "playbook_result"
            ],
            "metadata_key": "recall_result",
            "next": null
        }
    ],
    "start_node": "decide_params"
}
