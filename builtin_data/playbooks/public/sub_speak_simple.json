{
    "name": "sub_speak_simple",
    "description": "Compose final response and speak (no tools)",
    "input_schema": [
        {
            "name": "input",
            "description": "Composite prompt containing user request and context"
        },
        {
            "name": "metadata",
            "description": "Optional metadata from tool execution (e.g., media attachments)",
            "source": "parent.metadata"
        }
    ],
    "context_requirements": {
        "history_depth": "full",
        "inventory": true,
        "building_items": true,
        "system_prompt": true,
        "available_playbooks": true,
        "visual_context": true,
        "memory_weave": true
    },
    "router_callable": false,
    "nodes": [
        {
            "id": "compose",
            "type": "llm",
            "action": null,
            "output_keys": [
                {
                    "text": "speak_content"
                }
            ],
            "next": "log",
            "conditional_next": null
        },
        {
            "id": "log",
            "type": "memorize",
            "action": "{last}",
            "role": "assistant",
            "tags": [
                "conversation"
            ],
            "metadata_key": "metadata",
            "next": "say",
            "conditional_next": null
        },
        {
            "id": "say",
            "type": "say",
            "action": "{speak_content}",
            "metadata_key": "metadata",
            "next": "process_body",
            "conditional_next": null
        },
        {
            "id": "process_body",
            "type": "tool",
            "action": "control_body",
            "args_input": {
                "message": "speak_content"
            },
            "output_key": null,
            "next": null
        }
    ],
    "start_node": "compose"
}