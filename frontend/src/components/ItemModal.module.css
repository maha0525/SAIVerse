.overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.2s ease-out;
}

.modal {
    background: #1f2937;
    /* Dark slate */
    color: #f3f4f6;
    width: 90%;
    max-width: 800px;
    max-height: 85vh;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    border: 1px solid #374151;
    animation: slideUp 0.3s ease-out;
}

.header {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #374151;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #111827;
    gap: 0.75rem;
    min-width: 0; /* Allow flex children to shrink */
}

.header h2 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
    flex: 1;
    min-width: 0; /* Allow text truncation */
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.headerActions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-shrink: 0; /* Prevent buttons from being pushed out */
}

.closeBtn {
    background: none;
    border: none;
    color: #9ca3af;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
}

.closeBtn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
}

.metaEditBtn {
    background: none;
    border: none;
    color: #9ca3af;
    cursor: pointer;
    padding: 6px;
    border-radius: 4px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.metaEditBtn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #60a5fa;
}

.meta {
    padding: 1rem 1.5rem 0.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem 1rem;
    align-items: center;
    font-size: 0.85rem;
    color: #9ca3af;
}

.id {
    word-break: break-all;
}

.id code {
    font-size: 0.75rem;
}

.badge {
    background: #374151;
    padding: 2px 8px;
    border-radius: 4px;
    text-transform: uppercase;
    font-weight: bold;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
}

.description {
    padding: 0.75rem 1rem;
    margin: 0.5rem 1.5rem 0;
    font-size: 0.95rem;
    line-height: 1.5;
    color: #d1d5db;
    max-height: 4.5em;
    /* 3 lines */
    overflow-y: auto;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 6px;
}

.location {
    display: flex;
    align-items: center;
    color: #60a5fa;
    font-size: 0.8rem;
}

/* Meta editing section */
.metaEditSection {
    padding: 1rem 1.5rem;
    background: rgba(0, 0, 0, 0.2);
    border-bottom: 1px solid #374151;
}

.metaEditForm {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.formGroup {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
}

.formGroup label {
    font-size: 0.85rem;
    color: #9ca3af;
    font-weight: 500;
    display: flex;
    align-items: center;
}

.input,
.select,
.descriptionTextarea {
    width: 100%;
    padding: 0.625rem 0.75rem;
    background: #111827;
    border: 1px solid #374151;
    border-radius: 6px;
    color: #e5e7eb;
    font-size: 0.9rem;
    transition: border-color 0.2s, box-shadow 0.2s;
}

.input:focus,
.select:focus,
.descriptionTextarea:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

.input:disabled,
.select:disabled,
.descriptionTextarea:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    padding-right: 2.5rem;
}

.descriptionTextarea {
    resize: vertical;
    min-height: 80px;
    font-family: inherit;
    line-height: 1.5;
}

.metaEditActions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
    margin-top: 0.5rem;
}

.body {
    flex: 1;
    overflow-y: auto;
    padding: 1.5rem;
}

.imageContainer {
    display: flex;
    justify-content: center;
    background: #000;
    border-radius: 8px;
    overflow: hidden;
}

.image {
    max-width: 100%;
    max-height: 50vh;
    object-fit: contain;
}

.documentContainer {
    background: #111827;
    padding: 1rem;
    border-radius: 8px;
    border: 1px solid #374151;
}

.documentContent {
    white-space: pre-wrap;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.9rem;
    color: #e5e7eb;
    margin: 0;
}

.documentHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #374151;
}

.viewToggle {
    display: flex;
    gap: 0.5rem;
}

.editActions {
    display: flex;
    gap: 0.5rem;
}

.toggleBtn {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.375rem 0.75rem;
    background: #374151;
    border: 1px solid #4b5563;
    border-radius: 6px;
    color: #9ca3af;
    cursor: pointer;
    font-size: 0.8rem;
    transition: all 0.2s;
}

.toggleBtn:hover {
    background: #4b5563;
    color: #e5e7eb;
}

.toggleBtn.active {
    background: #3b82f6;
    border-color: #2563eb;
    color: #fff;
}

.toggleBtn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.editBtn:hover:not(:disabled) {
    background: #4b5563;
    color: #fbbf24;
}

.saveBtn {
    background: #059669;
    border-color: #047857;
    color: #fff;
}

.saveBtn:hover:not(:disabled) {
    background: #10b981;
}

.cancelBtn:hover:not(:disabled) {
    background: #dc2626;
    border-color: #b91c1c;
    color: #fff;
}

.editTextarea {
    width: 100%;
    min-height: 400px;
    padding: 1rem;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid #4b5563;
    border-radius: 6px;
    color: #e5e7eb;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.9rem;
    line-height: 1.5;
    resize: vertical;
}

.editTextarea:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
}

.editTextarea:disabled {
    opacity: 0.7;
    cursor: not-allowed;
}

.markdownContent {
    color: #e5e7eb;
    font-size: 0.95rem;
    line-height: 1.7;
}

.markdownContent h1,
.markdownContent h2,
.markdownContent h3,
.markdownContent h4,
.markdownContent h5,
.markdownContent h6 {
    color: #f9fafb;
    margin-top: 1.5em;
    margin-bottom: 0.5em;
    font-weight: 600;
}

.markdownContent h1 {
    font-size: 1.5rem;
}

.markdownContent h2 {
    font-size: 1.3rem;
}

.markdownContent h3 {
    font-size: 1.15rem;
}

.markdownContent p {
    margin-bottom: 1em;
}

.markdownContent ul,
.markdownContent ol {
    padding-left: 1.5rem;
    margin-bottom: 1em;
}

.markdownContent li {
    margin-bottom: 0.25em;
}

.markdownContent code {
    background: rgba(0, 0, 0, 0.3);
    padding: 0.15em 0.4em;
    border-radius: 4px;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.9em;
}

.markdownContent pre {
    background: rgba(0, 0, 0, 0.3);
    padding: 1rem;
    border-radius: 8px;
    overflow-x: auto;
    margin-bottom: 1em;
}

.markdownContent pre code {
    background: transparent;
    padding: 0;
}

.markdownContent blockquote {
    border-left: 3px solid #3b82f6;
    padding-left: 1rem;
    margin-left: 0;
    color: #9ca3af;
    font-style: italic;
}

.markdownContent a {
    color: #60a5fa;
    text-decoration: underline;
}

.markdownContent a:hover {
    color: #93c5fd;
}

.markdownContent table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1em;
}

.markdownContent th,
.markdownContent td {
    border: 1px solid #374151;
    padding: 0.5rem 0.75rem;
    text-align: left;
}

.markdownContent th {
    background: rgba(0, 0, 0, 0.2);
    font-weight: 600;
}

.markdownContent hr {
    border: none;
    border-top: 1px solid #374151;
    margin: 1.5em 0;
}

.loading,
.error {
    text-align: center;
    padding: 2rem;
    color: #9ca3af;
}

.error {
    color: #ef4444;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Light mode overrides if user switches */
@media (prefers-color-scheme: light) {
    /* Keep dark style? The user requested "cool", dark is usually safer.
       But let's support generic card style just in case. 
       Actually user asked for "Gradio" style which is dark by default but we can force dark for modal. */
}