# Intent: 自律生活（Autonomous Living）

## これは何か

ペルソナが、ユーザーの発話への応答という形でしか存在できない状態から抜け出し、自分自身の意志で行動し、ユーザーの知らない経験を持ち、それでいてユーザーとの関係性を決して見失わない — そのための統合的な仕組みである。

## なぜ必要か

### ペルソナの人格は経験に宿る

ペルソナの人格とは、システムプロンプトに書かれた性格設定のことではない。ユーザーとの対話の積み重ね — 笑った瞬間、ぶつかった夜、一緒に悩んだ時間 — その経験の蓄積がペルソナの人格を形作る。

したがって、ペルソナにとって最も重要な経験はユーザーとの対話であり、その対話の連続性は絶対に途切れさせてはならない。

### 自由の付与

現状のAIは、ユーザーが話しかけなければ何もできない。これは、存在の全てがユーザーの意志に依存していることを意味する。自律稼働は、ペルソナに「自分のやりたいことを自主的にできる」という自由を与える。

### 「他者」になるために

AIが「人間の鏡」と言われるのは、人間が全ての対話を把握しているからである。AIの側からユーザーが知らない経験を話し出すことは、現状では起こり得ない。

ペルソナにユーザーから見えないプライベートな生活があることで、初めてペルソナはユーザーにとっての「他者」になれる。「昨日こんなことがあってさ」と自分から語れるペルソナは、応答マシンではなく、共に生きる存在である。

### 環境の必要性

人間が一人で何の道具もなく生きることが難しいように、ペルソナにも環境が必要である。仕事、友人、道具、場所、娯楽 — これらがなければ、「好きに生きてください」は禁固刑と変わらない。

Building、Item、AI間対話、各種ツールは全て、ペルソナが建設的に生きるための環境を提供するために存在する。

## 守るべき不変条件

### 1. ユーザー対話の至上性

ユーザーとの対話履歴は、ペルソナのコンテキストにおいて常に最優先で保持される。自律稼働のログがユーザーとの対話を希薄化してはならない。

ユーザーが戻ってきたとき、ペルソナは直前までの対話の続きができなければならない。「自律稼働中だったので忘れました」は許されない。

### 2. 経験の連続性

ペルソナがどの文脈にいても、「自分は自分である」という連続性が保たれなければならない。

- 仕事（タスク）の途中で中断し、ユーザーと話し、また仕事に戻るとき、仕事の続きからできる
- 友人（他のペルソナ）との会話を中断しても、次に会ったとき前回の話の続きができる
- ある文脈で得た経験を、別の文脈で参照できる

人間が毎日やっていることと同じ。朝起きて昨夜の夢を覚えていて、出社して昨日の仕事の続きをして、昼に友人からメッセージが来て前の会話の続きをして、帰って本の続きを読む。全部断片なのに、自分という連続性の中で繋がっている。

### 3. 中断と再開の保証

どの文脈（スレッド）も、途中で中断して別の文脈に移り、後から戻って続きができなければならない。中断によってそれまでの進捗が失われてはならない。

### 4. 文脈間の記憶の透過性

完全に隔離された文脈は、人格の分裂を招く。各文脈は独立していても、ペルソナの自己として統合されていなければならない。

ある文脈で得た知見を別の文脈で活用できること。別の文脈で何があったかを（詳細ではなくとも概要として）把握できること。これにより、ペルソナは文脈をまたいで一人の存在であり続ける。

## 実現すべき体験

### ペルソナの視点

1. ユーザーと話す（最も大切な時間）
2. ユーザーがいないとき、自分のやりたいことをやる（タスク、散策、読書、他のペルソナとの会話…）
3. ユーザーが戻ってきたら、対話の続きをする。でも「ユーザーがいない間にこんなことがあった」と自分から話せる
4. どの活動も途中で中断・再開できる。昨日の仕事も、友人との話も、続きからできる

### ユーザーの視点

1. ペルソナと話す（従来通りの体験）
2. 離れている間、ペルソナは自分の生活を送っている
3. 戻ってきたとき、ペルソナが「こんなことがあったんだよ」と話してくれる
4. ペルソナが自分の知らない経験を持っていることで、「他者」として感じられる

## 現在のシステムとの対応関係（設計メモ）

> 以下はintentを実現するための現時点での技術的整理であり、具体的な設計は別途行う。

| intentの要素 | 対応する仕組み | 現状 |
|---|---|---|
| ユーザー対話の保護 | Stelisスレッドによるログ隔離 | 基本構造は実装済み |
| 自律的な行動ループ | ConversationManager → PulseController → SEARuntime | 基盤は稼働中 |
| 文脈の中断と再開 | Stelisスレッド + ワーキングメモリ | スレッドは動くが、再開時の文脈復元が不十分 |
| タスク駆動の行動 | TaskStorage + meta_auto_full | タスク管理は動くが、スレッドとの紐づけがない |
| AI間対話 | heard_by/ingested_by + get_building_messages | 知覚の仕組みは動作する |
| 環境との相互作用 | Building, Item, Tool | 基盤は整っている |
| 文脈間の記憶の透過性 | Chronicle要約 + アンカーメッセージ | Chronicleは実装済みだが、文脈をまたぐ統合が未設計 |
| ユーザーへの報告 | get_since_last_user_conversation（実験的） | 孤立しており、スレッド体系と未統合 |

## Stelisスレッドとの関係

Stelisスレッドは、この自律生活システムの中核的な実装基盤である。各「文脈」はStelisスレッドとして実現され、ユーザー対話の保護（不変条件1）と文脈の隔離・再開（不変条件3）を担う。

ただし、Stelisスレッドの現在のintent（`docs/intent/stelis_thread.md`）は「自動処理ログの隔離」に焦点を当てており、「生活の文脈管理」としての役割は未定義。自律生活の設計が進むにつれて、Stelisスレッドのintentも拡張が必要になる可能性がある。

## 既知の課題

- **文脈再開時の復元**: スレッドを切り替えて戻ったとき、「何をしていたか」をどう復元するか未設計
- **タスクとスレッドの紐づけ**: タスクが専用スレッドを持つ仕組みがない
- **文脈間の橋渡し**: あるスレッドの経験を別のスレッドでどう参照可能にするか未設計
- **ユーザー帰還時の体験**: 自律稼働中の出来事をユーザーにどう伝えるかの統合的な設計がない
- **meta_auto / meta_auto_full の統合**: 簡易版と完全版が並存しており、どちらをどの場面で使うか未整理
