{
  "name": "sub_perceive",
  "description": "Perceive the environment: gather new messages, situation snapshot, task summary, and build context",
  "input_schema": [
    {
      "name": "input",
      "description": "Trigger input (usually empty for autonomous mode)"
    }
  ],
  "output_schema": ["messages", "situation_snapshot", "task_summary", "perception_summary"],
  "context_requirements": {
    "history_depth": 0,
    "system_prompt": false,
    "inventory": false,
    "building_items": false
  },
  "router_callable": false,
  "user_selectable": false,
  "nodes": [
    {
      "id": "get_messages",
      "type": "tool",
      "action": "get_building_messages",
      "args_input": {},
      "output_key": "perception_summary",
      "next": "get_snapshot"
    },
    {
      "id": "get_snapshot",
      "type": "tool",
      "action": "get_situation_snapshot",
      "args_input": {},
      "output_key": "situation_snapshot",
      "next": "get_tasks"
    },
    {
      "id": "get_tasks",
      "type": "tool",
      "action": "get_task_summary",
      "args_input": {},
      "output_key": "task_summary",
      "next": "build_context"
    },
    {
      "id": "build_context",
      "type": "tool",
      "action": "get_history",
      "args_input": {},
      "output_key": "messages",
      "next": null
    }
  ],
  "start_node": "get_messages"
}
